{% if max_page > 1 %}
    {% set request = app.request.attributes.get('page') %}
     <div class="pagination">
     <ul>
        {% if query %}
             {% if request > 1 %}
                <li><a href="{{path(target, {'page' : request - 1, 'query' : query})}}">Prev</a></li> 
            {% endif %}
            {% for page in 1..max_page %}
               <li {% if request == page %}class="current_page"{% endif %}><a href="{{path(target, {'page' : page, 'query' : query})}}">{{page}}</a></li>
            {% endfor %}
            {% if request < max_page %}
                <li><a href="{{path(target, {'page' : request + 1, 'query' : query})}}">Next</a></li> 
            {% endif %}
        {% else %}
            {% if request > 1 %}
                <li><a href="{{path(target, {'page' : request - 1})}}">Prev</a></li> 
            {% endif %}
            {% for page in 1..max_page %}
                <li  {% if request == page %}class="current_page"{% endif %}><a href="{{path(target, {'page' : page})}}">{{page}}</a></li>
            {% endfor %}
             {% if request < max_page %}
                <li><a href="{{path(target, {'page' : request + 1})}}">Next</a></li> 
            {% endif %}
        {% endif %}
        </ul>
    </div>
{% endif %}
    